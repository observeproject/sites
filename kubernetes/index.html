<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=alternate type=application/rss+xml href=https://stack.observability.udmire.cn/kubernetes/index.xml title="Mixins for Observability Stack"><link rel=canonical href=https://stack.observability.udmire.cn/kubernetes/><title>kubernetes | Mixins for Observability Stack
</title><link href=https://stack.observability.udmire.cn/css/fontawesome.min.css rel=stylesheet><link rel=stylesheet href=https://stack.observability.udmire.cn/css/ace.min.css></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow sticky-top" id=navbarMain><div class=container><div><a class=navbar-brand href=/>Mixins for Observability Stack</a></div><button class="navbar-toggler navbar-toggler-right collapsed" type=button data-toggle=collapse data-target=#navbarMainCollapse aria-controls=navbarMainCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMainCollapse><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/>Homepage</a></li><li class=nav-item><a class=nav-link href=https://github.com/monitoring-mixins/docs>About mixins</a></li><li class=nav-item><a class=nav-link href=https://github.com/observeproject/sites>GitHub</a></li></ul></div></div><div class=feed-icons><a href=https://stack.observability.udmire.cn/kubernetes/index.xml><img src=/img/feed-icon.svg alt="RSS feed"></a></div></nav><div class=container-fluid><div class=row><div class="docs-sidenav order-0 col-12 col-md-3 col-lg-2 col-xl-2 position-sticky border-right"><nav class="navbar navbar-expand-md navbar-light pl-0"><button class="navbar-toggler navbar-toggler-right collapsed" type=button data-toggle=collapse data-target=#sidenav-left-collapse aria-controls=sidenav-left-collapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse align-items-start flex-column" id=sidenav-left-collapse><ul class="navbar-nav flex-column pt-3"><li data-nav-id=/coredns/ class="nav-item my-1"><a class="nav-link p-0" href=/coredns/><h6>coredns</h6></a></li><li data-nav-id=/etcd/ class="nav-item my-1"><a class="nav-link p-0" href=/etcd/><h6>etcd</h6></a></li><li data-nav-id=/grafana/ class="nav-item my-1"><a class="nav-link p-0" href=/grafana/><h6>grafana</h6></a></li><li data-nav-id=/grafana-agent/ class="nav-item my-1"><a class="nav-link p-0" href=/grafana-agent/><h6>grafana-agent</h6></a></li><li data-nav-id=/kube-state-metrics/ class="nav-item my-1"><a class="nav-link p-0" href=/kube-state-metrics/><h6>kube-state-metrics</h6></a></li><li data-nav-id=/kubernetes/ class="nav-item my-1 active"><a class="nav-link p-0" href=/kubernetes/><h6>kubernetes</h6></a></li><li data-nav-id=/loki/ class="nav-item my-1"><a class="nav-link p-0" href=/loki/><h6>loki</h6></a></li><li data-nav-id=/memcached/ class="nav-item my-1"><a class="nav-link p-0" href=/memcached/><h6>memcached</h6></a></li><li data-nav-id=/mimir/ class="nav-item my-1"><a class="nav-link p-0" href=/mimir/><h6>mimir</h6></a></li><li data-nav-id=/node-exporter/ class="nav-item my-1"><a class="nav-link p-0" href=/node-exporter/><h6>node-exporter</h6></a></li><li data-nav-id=/pyroscope/ class="nav-item my-1"><a class="nav-link p-0" href=/pyroscope/><h6>pyroscope</h6></a></li><li data-nav-id=/tempo/ class="nav-item my-1"><a class="nav-link p-0" href=/tempo/><h6>tempo</h6></a></li></ul></div></nav></div><div class="docs-toc large order-lg-2 order-md-0 order-xs-1 col-12 col-lg-3 col-xl-3 position-sticky border-left"><div class=docs-toc><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#alerts>Alerts</a><ul><li><a href=#kubernetes-apps>kubernetes-apps</a></li><li><a href=#kubernetes-resources>kubernetes-resources</a></li><li><a href=#kubernetes-storage>kubernetes-storage</a></li><li><a href=#kubernetes-system>kubernetes-system</a></li><li><a href=#kube-apiserver-slos>kube-apiserver-slos</a></li><li><a href=#kubernetes-system-apiserver>kubernetes-system-apiserver</a></li><li><a href=#kubernetes-system-kubelet>kubernetes-system-kubelet</a></li><li><a href=#kubernetes-system-scheduler>kubernetes-system-scheduler</a></li><li><a href=#kubernetes-system-controller-manager>kubernetes-system-controller-manager</a></li><li><a href=#kubernetes-system-kube-proxy>kubernetes-system-kube-proxy</a></li></ul></li><li><a href=#recording-rules>Recording rules</a><ul><li><a href=#kube-apiserver-burnraterules>kube-apiserver-burnrate.rules</a></li><li><a href=#kube-apiserver-histogramrules>kube-apiserver-histogram.rules</a></li><li><a href=#kube-apiserver-availabilityrules>kube-apiserver-availability.rules</a></li><li><a href=#k8srulescontainer_cpu_usage_seconds_total>k8s.rules.container_cpu_usage_seconds_total</a></li><li><a href=#k8srulescontainer_memory_working_set_bytes>k8s.rules.container_memory_working_set_bytes</a></li><li><a href=#k8srulescontainer_memory_rss>k8s.rules.container_memory_rss</a></li><li><a href=#k8srulescontainer_memory_cache>k8s.rules.container_memory_cache</a></li><li><a href=#k8srulescontainer_memory_swap>k8s.rules.container_memory_swap</a></li><li><a href=#k8srulescontainer_resource>k8s.rules.container_resource</a></li><li><a href=#k8srulespod_owner>k8s.rules.pod_owner</a></li><li><a href=#kube-schedulerrules>kube-scheduler.rules</a></li><li><a href=#noderules>node.rules</a></li><li><a href=#kubeletrules>kubelet.rules</a></li></ul></li><li><a href=#dashboards>Dashboards</a></li></ul></nav></div></div><div class="main col-12 order-1 col-md-9 col-lg-9 col-xl-7 py-3"><h1>kubernetes</h1><h2 id=overview>Overview</h2><p>A set of Grafana dashboards and Prometheus alerts for Kubernetes.</p><div class="card my-3 border-top-0 border-right-0 border-bottom-0 border-left border-danger rounded" style=border-width:4px!important><div class="wrap border border-left-0 rounded"><div class="card-body pt-1">Jsonnet source code is available at <a href=https://github.com/kubernetes-monitoring/kubernetes-mixin>github.com/kubernetes-monitoring/kubernetes-mixin</a></div></div></div><h2 id=alerts>Alerts</h2><div class="card my-3 border-top-0 border-right-0 border-bottom-0 border-left border-warning rounded" style=border-width:4px!important><div class="wrap border border-left-0 rounded"><div class="card-body pt-1">Complete list of pregenerated alerts is available <a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/alerts.yaml>here</a>.</div></div></div><h3 id=kubernetes-apps>kubernetes-apps</h3><h5 id=kubepodcrashlooping>KubePodCrashLooping</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepodcrashlooping>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepodcrashlooping</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_320271f518>
Copy</button></div><div id=clipboard_320271f518><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubePodCrashLooping</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#d88200>&#39;Pod {{ $labels.namespace }}/{{ $labels.pod }} ({{ $labels.container }}) is in waiting state (reason: &#34;CrashLoopBackOff&#34;).&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepodcrashlooping</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Pod is crash looping.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  max_over_time(kube_pod_container_status_waiting_reason{reason=&#34;CrashLoopBackOff&#34;, job=&#34;kube-state-metrics&#34;}[5m]) &gt;= 1</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubepodnotready>KubePodNotReady</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepodnotready>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepodnotready</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_7e345a6cfd>
Copy</button></div><div id=clipboard_7e345a6cfd><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubePodNotReady</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Pod {{ $labels.namespace }}/{{ $labels.pod }} has been in a non-ready state for longer than 15 minutes.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepodnotready</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Pod has been in a non-ready state for more than 15 minutes.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    max by(namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_pod_status_phase{job=&#34;kube-state-metrics&#34;, phase=~&#34;Pending|Unknown|Failed&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    ) * on(namespace, pod, cluster) group_left(owner_kind) topk by(namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      1, max by(namespace, pod, owner_kind, cluster) (kube_pod_owner{owner_kind!=&#34;Job&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ) &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubedeploymentgenerationmismatch>KubeDeploymentGenerationMismatch</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentgenerationmismatch>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentgenerationmismatch</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_67124683d1>
Copy</button></div><div id=clipboard_67124683d1><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeDeploymentGenerationMismatch</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Deployment generation for {{ $labels.namespace }}/{{ $labels.deployment }} does not match, this indicates that the Deployment has failed but has not been rolled back.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentgenerationmismatch</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Deployment generation mismatch due to possible roll-back</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_deployment_status_observed_generation{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    !=
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_deployment_metadata_generation{job=&#34;kube-state-metrics&#34;}</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubedeploymentreplicasmismatch>KubeDeploymentReplicasMismatch</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentreplicasmismatch>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentreplicasmismatch</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_49d2c2d376>
Copy</button></div><div id=clipboard_49d2c2d376><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeDeploymentReplicasMismatch</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Deployment {{ $labels.namespace }}/{{ $labels.deployment }} has not matched the expected number of replicas for longer than 15 minutes.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentreplicasmismatch</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Deployment has not matched the expected number of replicas.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kube_deployment_spec_replicas{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>      &gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kube_deployment_status_replicas_available{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ) and (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    changes(kube_deployment_status_replicas_updated{job=&#34;kube-state-metrics&#34;}[10m])
</span></span></span><span style=display:flex><span><span style=color:#d88200>      ==
</span></span></span><span style=display:flex><span><span style=color:#d88200>    0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubedeploymentrolloutstuck>KubeDeploymentRolloutStuck</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentrolloutstuck>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentrolloutstuck</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_b78216094d>
Copy</button></div><div id=clipboard_b78216094d><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeDeploymentRolloutStuck</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Rollout of deployment {{ $labels.namespace }}/{{ $labels.deployment }} is not progressing for longer than 15 minutes.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentrolloutstuck</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Deployment rollout is not progressing.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_deployment_status_condition{condition=&#34;Progressing&#34;, status=&#34;false&#34;,job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>  != 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubestatefulsetreplicasmismatch>KubeStatefulSetReplicasMismatch</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetreplicasmismatch>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetreplicasmismatch</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_caed763f76>
Copy</button></div><div id=clipboard_caed763f76><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeStatefulSetReplicasMismatch</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>StatefulSet {{ $labels.namespace }}/{{ $labels.statefulset }} has not matched the expected number of replicas for longer than 15 minutes.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetreplicasmismatch</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>StatefulSet has not matched the expected number of replicas.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kube_statefulset_status_replicas_ready{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>      !=
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kube_statefulset_status_replicas{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ) and (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    changes(kube_statefulset_status_replicas_updated{job=&#34;kube-state-metrics&#34;}[10m])
</span></span></span><span style=display:flex><span><span style=color:#d88200>      ==
</span></span></span><span style=display:flex><span><span style=color:#d88200>    0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubestatefulsetgenerationmismatch>KubeStatefulSetGenerationMismatch</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetgenerationmismatch>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetgenerationmismatch</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_6a81dec49e>
Copy</button></div><div id=clipboard_6a81dec49e><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeStatefulSetGenerationMismatch</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>StatefulSet generation for {{ $labels.namespace }}/{{ $labels.statefulset }} does not match, this indicates that the StatefulSet has failed but has not been rolled back.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetgenerationmismatch</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>StatefulSet generation mismatch due to possible roll-back</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_statefulset_status_observed_generation{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    !=
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_statefulset_metadata_generation{job=&#34;kube-state-metrics&#34;}</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubestatefulsetupdatenotrolledout>KubeStatefulSetUpdateNotRolledOut</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetupdatenotrolledout>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetupdatenotrolledout</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_d01d063287>
Copy</button></div><div id=clipboard_d01d063287><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeStatefulSetUpdateNotRolledOut</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>StatefulSet {{ $labels.namespace }}/{{ $labels.statefulset }} update has not been rolled out.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetupdatenotrolledout</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>StatefulSet update has not been rolled out.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    max without (revision) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_statefulset_status_current_revision{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>        unless
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_statefulset_status_update_revision{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>      *
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_statefulset_replicas{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>        !=
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_statefulset_status_replicas_updated{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )  and (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    changes(kube_statefulset_status_replicas_updated{job=&#34;kube-state-metrics&#34;}[5m])
</span></span></span><span style=display:flex><span><span style=color:#d88200>      ==
</span></span></span><span style=display:flex><span><span style=color:#d88200>    0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubedaemonsetrolloutstuck>KubeDaemonSetRolloutStuck</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetrolloutstuck>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetrolloutstuck</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_352da3f415>
Copy</button></div><div id=clipboard_352da3f415><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeDaemonSetRolloutStuck</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} has not finished or progressed for at least 15 minutes.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetrolloutstuck</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>DaemonSet rollout is stuck.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_daemonset_status_current_number_scheduled{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>       !=
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_daemonset_status_desired_number_scheduled{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    ) or (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_daemonset_status_number_misscheduled{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>       !=
</span></span></span><span style=display:flex><span><span style=color:#d88200>      0
</span></span></span><span style=display:flex><span><span style=color:#d88200>    ) or (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_daemonset_status_updated_number_scheduled{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>       !=
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_daemonset_status_desired_number_scheduled{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    ) or (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_daemonset_status_number_available{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>       !=
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_daemonset_status_desired_number_scheduled{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ) and (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    changes(kube_daemonset_status_updated_number_scheduled{job=&#34;kube-state-metrics&#34;}[5m])
</span></span></span><span style=display:flex><span><span style=color:#d88200>      ==
</span></span></span><span style=display:flex><span><span style=color:#d88200>    0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubecontainerwaiting>KubeContainerWaiting</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecontainerwaiting>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecontainerwaiting</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_2b71e8c282>
Copy</button></div><div id=clipboard_2b71e8c282><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeContainerWaiting</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>pod/{{ $labels.pod }} in namespace {{ $labels.namespace }} on container {{ $labels.container}} has been in waiting state for longer than 1 hour.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecontainerwaiting</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Pod container waiting longer than 1 hour</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (namespace, pod, container, cluster) (kube_pod_container_status_waiting_reason{job=&#34;kube-state-metrics&#34;}) &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>1h</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubedaemonsetnotscheduled>KubeDaemonSetNotScheduled</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetnotscheduled>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetnotscheduled</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_6b872ec810>
Copy</button></div><div id=clipboard_6b872ec810><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeDaemonSetNotScheduled</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#d88200>&#39;{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} are not scheduled.&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetnotscheduled</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>DaemonSet pods are not scheduled.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_daemonset_status_desired_number_scheduled{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    -
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_daemonset_status_current_number_scheduled{job=&#34;kube-state-metrics&#34;} &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>10m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubedaemonsetmisscheduled>KubeDaemonSetMisScheduled</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetmisscheduled>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetmisscheduled</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_1328191781>
Copy</button></div><div id=clipboard_1328191781><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeDaemonSetMisScheduled</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#d88200>&#39;{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} are running where they are not supposed to run.&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetmisscheduled</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>DaemonSet pods are misscheduled.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_daemonset_status_number_misscheduled{job=&#34;kube-state-metrics&#34;} &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubejobnotcompleted>KubeJobNotCompleted</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubejobnotcompleted>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubejobnotcompleted</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_4324c037a8>
Copy</button></div><div id=clipboard_4324c037a8><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeJobNotCompleted</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Job {{ $labels.namespace }}/{{ $labels.job_name }} is taking more than {{ &#34;43200&#34; | humanizeDuration }} to complete.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubejobnotcompleted</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Job did not complete in time</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  time() - max by(namespace, job_name, cluster) (kube_job_status_start_time{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_job_status_active{job=&#34;kube-state-metrics&#34;} &gt; 0) &gt; 43200</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubejobfailed>KubeJobFailed</h5><p>Job {{ $labels.namespace }}/{{ $labels.job_name }} failed to complete. Removing failed job after investigation should clear this alert.
<a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubejobfailed>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubejobfailed</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_b93f9ebcc2>
Copy</button></div><div id=clipboard_b93f9ebcc2><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeJobFailed</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Job {{ $labels.namespace }}/{{ $labels.job_name }} failed to complete. Removing failed job after investigation should clear this alert.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubejobfailed</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Job failed to complete.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_job_failed{job=&#34;kube-state-metrics&#34;}  &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubehpareplicasmismatch>KubeHpaReplicasMismatch</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubehpareplicasmismatch>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubehpareplicasmismatch</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_73d1efb11f>
Copy</button></div><div id=clipboard_73d1efb11f><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeHpaReplicasMismatch</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>HPA {{ $labels.namespace }}/{{ $labels.horizontalpodautoscaler  }} has not matched the desired number of replicas for longer than 15 minutes.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubehpareplicasmismatch</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>HPA has not matched desired number of replicas.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (kube_horizontalpodautoscaler_status_desired_replicas{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    !=
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_horizontalpodautoscaler_status_current_replicas{job=&#34;kube-state-metrics&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>    and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (kube_horizontalpodautoscaler_status_current_replicas{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    &gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_horizontalpodautoscaler_spec_min_replicas{job=&#34;kube-state-metrics&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>    and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (kube_horizontalpodautoscaler_status_current_replicas{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    &lt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_horizontalpodautoscaler_spec_max_replicas{job=&#34;kube-state-metrics&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>    and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  changes(kube_horizontalpodautoscaler_status_current_replicas{job=&#34;kube-state-metrics&#34;}[15m]) == 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubehpamaxedout>KubeHpaMaxedOut</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubehpamaxedout>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubehpamaxedout</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_c217249326>
Copy</button></div><div id=clipboard_c217249326><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeHpaMaxedOut</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>HPA {{ $labels.namespace }}/{{ $labels.horizontalpodautoscaler  }} has been running at max replicas for longer than 15 minutes.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubehpamaxedout</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>HPA is running at max replicas</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_horizontalpodautoscaler_status_current_replicas{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    ==
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_horizontalpodautoscaler_spec_max_replicas{job=&#34;kube-state-metrics&#34;}</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h3 id=kubernetes-resources>kubernetes-resources</h3><h5 id=kubecpuovercommit>KubeCPUOvercommit</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecpuovercommit>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecpuovercommit</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_8fc6d06c4f>
Copy</button></div><div id=clipboard_8fc6d06c4f><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeCPUOvercommit</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Cluster has overcommitted CPU resource requests for Pods by {{ $value }} CPU shares and cannot tolerate node failure.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecpuovercommit</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Cluster has overcommitted CPU resource requests.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(namespace_cpu:kube_pod_container_resource_requests:sum{}) - (sum(kube_node_status_allocatable{resource=&#34;cpu&#34;, job=&#34;kube-state-metrics&#34;}) - max(kube_node_status_allocatable{resource=&#34;cpu&#34;, job=&#34;kube-state-metrics&#34;})) &gt; 0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (sum(kube_node_status_allocatable{resource=&#34;cpu&#34;, job=&#34;kube-state-metrics&#34;}) - max(kube_node_status_allocatable{resource=&#34;cpu&#34;, job=&#34;kube-state-metrics&#34;})) &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>10m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubememoryovercommit>KubeMemoryOvercommit</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubememoryovercommit>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubememoryovercommit</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_f9c45e88a8>
Copy</button></div><div id=clipboard_f9c45e88a8><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeMemoryOvercommit</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Cluster has overcommitted memory resource requests for Pods by {{ $value | humanize }} bytes and cannot tolerate node failure.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubememoryovercommit</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Cluster has overcommitted memory resource requests.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(namespace_memory:kube_pod_container_resource_requests:sum{}) - (sum(kube_node_status_allocatable{resource=&#34;memory&#34;, job=&#34;kube-state-metrics&#34;}) - max(kube_node_status_allocatable{resource=&#34;memory&#34;, job=&#34;kube-state-metrics&#34;})) &gt; 0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (sum(kube_node_status_allocatable{resource=&#34;memory&#34;, job=&#34;kube-state-metrics&#34;}) - max(kube_node_status_allocatable{resource=&#34;memory&#34;, job=&#34;kube-state-metrics&#34;})) &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>10m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubecpuquotaovercommit>KubeCPUQuotaOvercommit</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecpuquotaovercommit>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecpuquotaovercommit</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_7f193045fb>
Copy</button></div><div id=clipboard_7f193045fb><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeCPUQuotaOvercommit</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Cluster has overcommitted CPU resource requests for Namespaces.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecpuquotaovercommit</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Cluster has overcommitted CPU resource requests.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(min without(resource) (kube_resourcequota{job=&#34;kube-state-metrics&#34;, type=&#34;hard&#34;, resource=~&#34;(cpu|requests.cpu)&#34;}))
</span></span></span><span style=display:flex><span><span style=color:#d88200>    /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(kube_node_status_allocatable{resource=&#34;cpu&#34;, job=&#34;kube-state-metrics&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>    &gt; 1.5</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>5m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubememoryquotaovercommit>KubeMemoryQuotaOvercommit</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubememoryquotaovercommit>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubememoryquotaovercommit</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_c44124a7e4>
Copy</button></div><div id=clipboard_c44124a7e4><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeMemoryQuotaOvercommit</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Cluster has overcommitted memory resource requests for Namespaces.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubememoryquotaovercommit</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Cluster has overcommitted memory resource requests.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(min without(resource) (kube_resourcequota{job=&#34;kube-state-metrics&#34;, type=&#34;hard&#34;, resource=~&#34;(memory|requests.memory)&#34;}))
</span></span></span><span style=display:flex><span><span style=color:#d88200>    /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(kube_node_status_allocatable{resource=&#34;memory&#34;, job=&#34;kube-state-metrics&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>    &gt; 1.5</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>5m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubequotaalmostfull>KubeQuotaAlmostFull</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotaalmostfull>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotaalmostfull</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_b8152ccb8a>
Copy</button></div><div id=clipboard_b8152ccb8a><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeQuotaAlmostFull</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotaalmostfull</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Namespace quota is going to be full.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_resourcequota{job=&#34;kube-state-metrics&#34;, type=&#34;used&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    / ignoring(instance, job, type)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (kube_resourcequota{job=&#34;kube-state-metrics&#34;, type=&#34;hard&#34;} &gt; 0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>    &gt; 0.9 &lt; 1</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>info</span>
</span></span></code></pre></div></div></div><h5 id=kubequotafullyused>KubeQuotaFullyUsed</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotafullyused>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotafullyused</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_702cf40a46>
Copy</button></div><div id=clipboard_702cf40a46><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeQuotaFullyUsed</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotafullyused</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Namespace quota is fully used.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_resourcequota{job=&#34;kube-state-metrics&#34;, type=&#34;used&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    / ignoring(instance, job, type)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (kube_resourcequota{job=&#34;kube-state-metrics&#34;, type=&#34;hard&#34;} &gt; 0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>    == 1</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>info</span>
</span></span></code></pre></div></div></div><h5 id=kubequotaexceeded>KubeQuotaExceeded</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotaexceeded>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotaexceeded</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_bc71f1bdfb>
Copy</button></div><div id=clipboard_bc71f1bdfb><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeQuotaExceeded</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotaexceeded</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Namespace quota has exceeded the limits.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_resourcequota{job=&#34;kube-state-metrics&#34;, type=&#34;used&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    / ignoring(instance, job, type)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (kube_resourcequota{job=&#34;kube-state-metrics&#34;, type=&#34;hard&#34;} &gt; 0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>    &gt; 1</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=cputhrottlinghigh>CPUThrottlingHigh</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-cputhrottlinghigh>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-cputhrottlinghigh</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_a08b001fd9>
Copy</button></div><div id=clipboard_a08b001fd9><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>CPUThrottlingHigh</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#d88200>&#39;{{ $value | humanizePercentage }} throttling of CPU in namespace {{ $labels.namespace }} for container {{ $labels.container }} in pod {{ $labels.pod }}.&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-cputhrottlinghigh</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Processes experience elevated CPU throttling.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(increase(container_cpu_cfs_throttled_periods_total{container!=&#34;&#34;, }[5m])) by (cluster, container, pod, namespace)
</span></span></span><span style=display:flex><span><span style=color:#d88200>    /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(increase(container_cpu_cfs_periods_total{}[5m])) by (cluster, container, pod, namespace)
</span></span></span><span style=display:flex><span><span style=color:#d88200>    &gt; ( 25 / 100 )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>info</span>
</span></span></code></pre></div></div></div><h3 id=kubernetes-storage>kubernetes-storage</h3><h5 id=kubepersistentvolumefillingup>KubePersistentVolumeFillingUp</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumefillingup>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumefillingup</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_c4866b832c>
Copy</button></div><div id=clipboard_c4866b832c><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubePersistentVolumeFillingUp</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>The PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} {{ with $labels.cluster -}} on Cluster {{ . }} {{- end }} is only {{ $value | humanizePercentage }} free.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumefillingup</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>PersistentVolume is filling up.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kubelet_volume_stats_available_bytes{job=&#34;kubelet&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>      /
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kubelet_volume_stats_capacity_bytes{job=&#34;kubelet&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ) &lt; 0.03
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kubelet_volume_stats_used_bytes{job=&#34;kubelet&#34;} &gt; 0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  unless on(cluster, namespace, persistentvolumeclaim)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_persistentvolumeclaim_access_mode{ access_mode=&#34;ReadOnlyMany&#34;} == 1
</span></span></span><span style=display:flex><span><span style=color:#d88200>  unless on(cluster, namespace, persistentvolumeclaim)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_persistentvolumeclaim_labels{label_excluded_from_alerts=&#34;true&#34;} == 1</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>1m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span></code></pre></div></div></div><h5 id=kubepersistentvolumefillingup-1>KubePersistentVolumeFillingUp</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumefillingup>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumefillingup</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_56ee125da8>
Copy</button></div><div id=clipboard_56ee125da8><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubePersistentVolumeFillingUp</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Based on recent sampling, the PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} {{ with $labels.cluster -}} on Cluster {{ . }} {{- end }} is expected to fill up within four days. Currently {{ $value | humanizePercentage }} is available.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumefillingup</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>PersistentVolume is filling up.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kubelet_volume_stats_available_bytes{job=&#34;kubelet&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>      /
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kubelet_volume_stats_capacity_bytes{job=&#34;kubelet&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ) &lt; 0.15
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kubelet_volume_stats_used_bytes{job=&#34;kubelet&#34;} &gt; 0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  predict_linear(kubelet_volume_stats_available_bytes{job=&#34;kubelet&#34;}[6h], 4 * 24 * 3600) &lt; 0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  unless on(cluster, namespace, persistentvolumeclaim)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_persistentvolumeclaim_access_mode{ access_mode=&#34;ReadOnlyMany&#34;} == 1
</span></span></span><span style=display:flex><span><span style=color:#d88200>  unless on(cluster, namespace, persistentvolumeclaim)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_persistentvolumeclaim_labels{label_excluded_from_alerts=&#34;true&#34;} == 1</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>1h</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubepersistentvolumeinodesfillingup>KubePersistentVolumeInodesFillingUp</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeinodesfillingup>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeinodesfillingup</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_6b0e72c312>
Copy</button></div><div id=clipboard_6b0e72c312><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubePersistentVolumeInodesFillingUp</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>The PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} {{ with $labels.cluster -}} on Cluster {{ . }} {{- end }} only has {{ $value | humanizePercentage }} free inodes.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeinodesfillingup</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>PersistentVolumeInodes are filling up.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kubelet_volume_stats_inodes_free{job=&#34;kubelet&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>      /
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kubelet_volume_stats_inodes{job=&#34;kubelet&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ) &lt; 0.03
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kubelet_volume_stats_inodes_used{job=&#34;kubelet&#34;} &gt; 0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  unless on(cluster, namespace, persistentvolumeclaim)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_persistentvolumeclaim_access_mode{ access_mode=&#34;ReadOnlyMany&#34;} == 1
</span></span></span><span style=display:flex><span><span style=color:#d88200>  unless on(cluster, namespace, persistentvolumeclaim)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_persistentvolumeclaim_labels{label_excluded_from_alerts=&#34;true&#34;} == 1</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>1m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span></code></pre></div></div></div><h5 id=kubepersistentvolumeinodesfillingup-1>KubePersistentVolumeInodesFillingUp</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeinodesfillingup>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeinodesfillingup</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_6374566fcd>
Copy</button></div><div id=clipboard_6374566fcd><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubePersistentVolumeInodesFillingUp</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Based on recent sampling, the PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} {{ with $labels.cluster -}} on Cluster {{ . }} {{- end }} is expected to run out of inodes within four days. Currently {{ $value | humanizePercentage }} of its inodes are free.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeinodesfillingup</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>PersistentVolumeInodes are filling up.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kubelet_volume_stats_inodes_free{job=&#34;kubelet&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>      /
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kubelet_volume_stats_inodes{job=&#34;kubelet&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ) &lt; 0.15
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kubelet_volume_stats_inodes_used{job=&#34;kubelet&#34;} &gt; 0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  predict_linear(kubelet_volume_stats_inodes_free{job=&#34;kubelet&#34;}[6h], 4 * 24 * 3600) &lt; 0
</span></span></span><span style=display:flex><span><span style=color:#d88200>  unless on(cluster, namespace, persistentvolumeclaim)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_persistentvolumeclaim_access_mode{ access_mode=&#34;ReadOnlyMany&#34;} == 1
</span></span></span><span style=display:flex><span><span style=color:#d88200>  unless on(cluster, namespace, persistentvolumeclaim)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_persistentvolumeclaim_labels{label_excluded_from_alerts=&#34;true&#34;} == 1</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>1h</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubepersistentvolumeerrors>KubePersistentVolumeErrors</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeerrors>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeerrors</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_794c651cc2>
Copy</button></div><div id=clipboard_794c651cc2><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubePersistentVolumeErrors</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>The persistent volume {{ $labels.persistentvolume }} {{ with $labels.cluster -}} on Cluster {{ . }} {{- end }} has status {{ $labels.phase }}.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeerrors</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>PersistentVolume is having issues with provisioning.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_persistentvolume_status_phase{phase=~&#34;Failed|Pending&#34;,job=&#34;kube-state-metrics&#34;} &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>5m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span></code></pre></div></div></div><h3 id=kubernetes-system>kubernetes-system</h3><h5 id=kubeversionmismatch>KubeVersionMismatch</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeversionmismatch>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeversionmismatch</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_c426083ca4>
Copy</button></div><div id=clipboard_c426083ca4><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeVersionMismatch</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>There are {{ $value }} different semantic versions of Kubernetes components running.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeversionmismatch</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Different semantic versions of Kubernetes components running.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  count by (cluster) (count by (git_version, cluster) (label_replace(kubernetes_build_info{job!~&#34;kube-dns|coredns&#34;},&#34;git_version&#34;,&#34;$1&#34;,&#34;git_version&#34;,&#34;(v[0-9]*.[0-9]*).*&#34;))) &gt; 1</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubeclienterrors>KubeClientErrors</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclienterrors>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclienterrors</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_6657493d29>
Copy</button></div><div id=clipboard_6657493d29><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeClientErrors</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubernetes API server client &#39;{{ $labels.job }}/{{ $labels.instance }}&#39; is experiencing {{ $value | humanizePercentage }} errors.&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclienterrors</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubernetes API server client is experiencing errors.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (sum(rate(rest_client_requests_total{job=&#34;kube-apiserver&#34;,code=~&#34;5..&#34;}[5m])) by (cluster, instance, job, namespace)
</span></span></span><span style=display:flex><span><span style=color:#d88200>    /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(rate(rest_client_requests_total{job=&#34;kube-apiserver&#34;}[5m])) by (cluster, instance, job, namespace))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  &gt; 0.01</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h3 id=kube-apiserver-slos>kube-apiserver-slos</h3><h5 id=kubeapierrorbudgetburn>KubeAPIErrorBudgetBurn</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_a89e0b86e1>
Copy</button></div><div id=clipboard_a89e0b86e1><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeAPIErrorBudgetBurn</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>The API server is burning too much error budget.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>The API server is burning too much error budget.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(apiserver_request:burnrate1h) &gt; (14.40 * 0.01000)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(apiserver_request:burnrate5m) &gt; (14.40 * 0.01000)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>2m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>long</span><span style=color:#111>:</span> <span style=color:#ae81ff>1h</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>short</span><span style=color:#111>:</span> <span style=color:#ae81ff>5m</span>
</span></span></code></pre></div></div></div><h5 id=kubeapierrorbudgetburn-1>KubeAPIErrorBudgetBurn</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_224992d957>
Copy</button></div><div id=clipboard_224992d957><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeAPIErrorBudgetBurn</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>The API server is burning too much error budget.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>The API server is burning too much error budget.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(apiserver_request:burnrate6h) &gt; (6.00 * 0.01000)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(apiserver_request:burnrate30m) &gt; (6.00 * 0.01000)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>long</span><span style=color:#111>:</span> <span style=color:#ae81ff>6h</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>short</span><span style=color:#111>:</span> <span style=color:#ae81ff>30m</span>
</span></span></code></pre></div></div></div><h5 id=kubeapierrorbudgetburn-2>KubeAPIErrorBudgetBurn</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_20ec4ea1ce>
Copy</button></div><div id=clipboard_20ec4ea1ce><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeAPIErrorBudgetBurn</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>The API server is burning too much error budget.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>The API server is burning too much error budget.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(apiserver_request:burnrate1d) &gt; (3.00 * 0.01000)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(apiserver_request:burnrate2h) &gt; (3.00 * 0.01000)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>1h</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>long</span><span style=color:#111>:</span> <span style=color:#ae81ff>1d</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>short</span><span style=color:#111>:</span> <span style=color:#ae81ff>2h</span>
</span></span></code></pre></div></div></div><h5 id=kubeapierrorbudgetburn-3>KubeAPIErrorBudgetBurn</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_e4120bf0ce>
Copy</button></div><div id=clipboard_e4120bf0ce><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeAPIErrorBudgetBurn</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>The API server is burning too much error budget.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>The API server is burning too much error budget.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(apiserver_request:burnrate3d) &gt; (1.00 * 0.01000)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  and
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(apiserver_request:burnrate6h) &gt; (1.00 * 0.01000)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>3h</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>long</span><span style=color:#111>:</span> <span style=color:#ae81ff>3d</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>short</span><span style=color:#111>:</span> <span style=color:#ae81ff>6h</span>
</span></span></code></pre></div></div></div><h3 id=kubernetes-system-apiserver>kubernetes-system-apiserver</h3><h5 id=kubeclientcertificateexpiration>KubeClientCertificateExpiration</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclientcertificateexpiration>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclientcertificateexpiration</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_6573bb82fe>
Copy</button></div><div id=clipboard_6573bb82fe><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeClientCertificateExpiration</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>A client certificate used to authenticate to kubernetes apiserver is expiring in less than 7.0 days.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclientcertificateexpiration</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Client certificate is about to expire.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  apiserver_client_certificate_expiration_seconds_count{job=&#34;kube-apiserver&#34;} &gt; 0 and on(job) histogram_quantile(0.01, sum by (job, le) (rate(apiserver_client_certificate_expiration_seconds_bucket{job=&#34;kube-apiserver&#34;}[5m]))) &lt; 604800</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>5m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubeclientcertificateexpiration-1>KubeClientCertificateExpiration</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclientcertificateexpiration>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclientcertificateexpiration</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_7c0ca937ac>
Copy</button></div><div id=clipboard_7c0ca937ac><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeClientCertificateExpiration</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>A client certificate used to authenticate to kubernetes apiserver is expiring in less than 24.0 hours.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclientcertificateexpiration</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Client certificate is about to expire.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  apiserver_client_certificate_expiration_seconds_count{job=&#34;kube-apiserver&#34;} &gt; 0 and on(job) histogram_quantile(0.01, sum by (job, le) (rate(apiserver_client_certificate_expiration_seconds_bucket{job=&#34;kube-apiserver&#34;}[5m]))) &lt; 86400</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>5m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span></code></pre></div></div></div><h5 id=kubeaggregatedapierrors>KubeAggregatedAPIErrors</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeaggregatedapierrors>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeaggregatedapierrors</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_a2fe753718>
Copy</button></div><div id=clipboard_a2fe753718><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeAggregatedAPIErrors</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubernetes aggregated API {{ $labels.name }}/{{ $labels.namespace }} has reported errors. It has appeared unavailable {{ $value | humanize }} times averaged over the past 10m.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeaggregatedapierrors</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubernetes aggregated API has reported errors.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by(name, namespace, cluster)(increase(aggregator_unavailable_apiservice_total{job=&#34;kube-apiserver&#34;}[10m])) &gt; 4</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubeaggregatedapidown>KubeAggregatedAPIDown</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeaggregatedapidown>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeaggregatedapidown</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_90c4809926>
Copy</button></div><div id=clipboard_90c4809926><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeAggregatedAPIDown</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubernetes aggregated API {{ $labels.name }}/{{ $labels.namespace }} has been only {{ $value | humanize }}% available over the last 10m.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeaggregatedapidown</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubernetes aggregated API is down.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (1 - max by(name, namespace, cluster)(avg_over_time(aggregator_unavailable_apiservice{job=&#34;kube-apiserver&#34;}[10m]))) * 100 &lt; 85</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>5m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubeapidown>KubeAPIDown</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapidown>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapidown</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_baa6c432de>
Copy</button></div><div id=clipboard_baa6c432de><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeAPIDown</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeAPI has disappeared from Prometheus target discovery.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapidown</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Target disappeared from Prometheus target discovery.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  absent(up{job=&#34;kube-apiserver&#34;} == 1)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span></code></pre></div></div></div><h5 id=kubeapiterminatedrequests>KubeAPITerminatedRequests</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapiterminatedrequests>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapiterminatedrequests</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_abf7771900>
Copy</button></div><div id=clipboard_abf7771900><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeAPITerminatedRequests</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>The kubernetes apiserver has terminated {{ $value | humanizePercentage }} of its incoming requests.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapiterminatedrequests</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>The kubernetes apiserver has terminated {{ $value | humanizePercentage }} of its incoming requests.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(rate(apiserver_request_terminations_total{job=&#34;kube-apiserver&#34;}[10m]))  / (  sum(rate(apiserver_request_total{job=&#34;kube-apiserver&#34;}[10m])) + sum(rate(apiserver_request_terminations_total{job=&#34;kube-apiserver&#34;}[10m])) ) &gt; 0.20</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>5m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h3 id=kubernetes-system-kubelet>kubernetes-system-kubelet</h3><h5 id=kubenodenotready>KubeNodeNotReady</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodenotready>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodenotready</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_0757957df1>
Copy</button></div><div id=clipboard_0757957df1><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeNodeNotReady</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#d88200>&#39;{{ $labels.node }} has been unready for more than 15 minutes.&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodenotready</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Node is not ready.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_node_status_condition{job=&#34;kube-state-metrics&#34;,condition=&#34;Ready&#34;,status=&#34;true&#34;} == 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubenodeunreachable>KubeNodeUnreachable</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodeunreachable>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodeunreachable</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_5dae82c700>
Copy</button></div><div id=clipboard_5dae82c700><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeNodeUnreachable</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#d88200>&#39;{{ $labels.node }} is unreachable and some workloads may be rescheduled.&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodeunreachable</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Node is unreachable.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (kube_node_spec_taint{job=&#34;kube-state-metrics&#34;,key=&#34;node.kubernetes.io/unreachable&#34;,effect=&#34;NoSchedule&#34;} unless ignoring(key,value) kube_node_spec_taint{job=&#34;kube-state-metrics&#34;,key=~&#34;ToBeDeletedByClusterAutoscaler|cloud.google.com/impending-node-termination|aws-node-termination-handler/spot-itn&#34;}) == 1</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubelettoomanypods>KubeletTooManyPods</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubelettoomanypods>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubelettoomanypods</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_0743b79b45>
Copy</button></div><div id=clipboard_0743b79b45><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeletTooManyPods</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet &#39;{{ $labels.node }}&#39; is running at {{ $value | humanizePercentage }} of its Pod capacity.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubelettoomanypods</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet is running at capacity.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  count by(cluster, node) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (kube_pod_status_phase{job=&#34;kube-state-metrics&#34;,phase=&#34;Running&#34;} == 1) * on(instance,pod,namespace,cluster) group_left(node) topk by(instance,pod,namespace,cluster) (1, kube_pod_info{job=&#34;kube-state-metrics&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  max by(cluster, node) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    kube_node_status_capacity{job=&#34;kube-state-metrics&#34;,resource=&#34;pods&#34;} != 1
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ) &gt; 0.95</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>info</span>
</span></span></code></pre></div></div></div><h5 id=kubenodereadinessflapping>KubeNodeReadinessFlapping</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodereadinessflapping>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodereadinessflapping</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_bb0d182eb7>
Copy</button></div><div id=clipboard_bb0d182eb7><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeNodeReadinessFlapping</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>The readiness status of node {{ $labels.node }} has changed {{ $value }} times in the last 15 minutes.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodereadinessflapping</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Node readiness status is flapping.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(changes(kube_node_status_condition{job=&#34;kube-state-metrics&#34;,status=&#34;true&#34;,condition=&#34;Ready&#34;}[15m])) by (cluster, node) &gt; 2</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubeletplegdurationhigh>KubeletPlegDurationHigh</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletplegdurationhigh>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletplegdurationhigh</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_a94fb99e13>
Copy</button></div><div id=clipboard_a94fb99e13><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeletPlegDurationHigh</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>The Kubelet Pod Lifecycle Event Generator has a 99th percentile duration of {{ $value }} seconds on node {{ $labels.node }}.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletplegdurationhigh</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet Pod Lifecycle Event Generator is taking too long to relist.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile{quantile=&#34;0.99&#34;} &gt;= 10</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>5m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubeletpodstartuplatencyhigh>KubeletPodStartUpLatencyHigh</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletpodstartuplatencyhigh>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletpodstartuplatencyhigh</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_8e957a19f2>
Copy</button></div><div id=clipboard_8e957a19f2><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeletPodStartUpLatencyHigh</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet Pod startup 99th percentile latency is {{ $value }} seconds on node {{ $labels.node }}.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletpodstartuplatencyhigh</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet Pod startup latency is too high.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.99, sum(rate(kubelet_pod_worker_duration_seconds_bucket{job=&#34;kubelet&#34;}[5m])) by (cluster, instance, le)) * on(cluster, instance) group_left(node) kubelet_node_name{job=&#34;kubelet&#34;} &gt; 60</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubeletclientcertificateexpiration>KubeletClientCertificateExpiration</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificateexpiration>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificateexpiration</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_bbfabae616>
Copy</button></div><div id=clipboard_bbfabae616><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeletClientCertificateExpiration</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Client certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificateexpiration</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet client certificate is about to expire.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kubelet_certificate_manager_client_ttl_seconds &lt; 604800</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubeletclientcertificateexpiration-1>KubeletClientCertificateExpiration</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificateexpiration>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificateexpiration</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_688acacd6d>
Copy</button></div><div id=clipboard_688acacd6d><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeletClientCertificateExpiration</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Client certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificateexpiration</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet client certificate is about to expire.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kubelet_certificate_manager_client_ttl_seconds &lt; 86400</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span></code></pre></div></div></div><h5 id=kubeletservercertificateexpiration>KubeletServerCertificateExpiration</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificateexpiration>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificateexpiration</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_60a62a46ca>
Copy</button></div><div id=clipboard_60a62a46ca><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeletServerCertificateExpiration</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Server certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificateexpiration</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet server certificate is about to expire.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kubelet_certificate_manager_server_ttl_seconds &lt; 604800</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubeletservercertificateexpiration-1>KubeletServerCertificateExpiration</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificateexpiration>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificateexpiration</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_a57b105f97>
Copy</button></div><div id=clipboard_a57b105f97><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeletServerCertificateExpiration</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Server certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificateexpiration</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet server certificate is about to expire.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kubelet_certificate_manager_server_ttl_seconds &lt; 86400</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span></code></pre></div></div></div><h5 id=kubeletclientcertificaterenewalerrors>KubeletClientCertificateRenewalErrors</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificaterenewalerrors>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificaterenewalerrors</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_af5e839cef>
Copy</button></div><div id=clipboard_af5e839cef><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeletClientCertificateRenewalErrors</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet on node {{ $labels.node }} has failed to renew its client certificate ({{ $value | humanize }} errors in the last 5 minutes).</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificaterenewalerrors</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet has failed to renew its client certificate.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  increase(kubelet_certificate_manager_client_expiration_renew_errors[5m]) &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubeletservercertificaterenewalerrors>KubeletServerCertificateRenewalErrors</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificaterenewalerrors>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificaterenewalerrors</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_733b039765>
Copy</button></div><div id=clipboard_733b039765><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeletServerCertificateRenewalErrors</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet on node {{ $labels.node }} has failed to renew its server certificate ({{ $value | humanize }} errors in the last 5 minutes).</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificaterenewalerrors</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet has failed to renew its server certificate.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  increase(kubelet_server_expiration_renew_errors[5m]) &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>warning</span>
</span></span></code></pre></div></div></div><h5 id=kubeletdown>KubeletDown</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletdown>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletdown</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_d460917bac>
Copy</button></div><div id=clipboard_d460917bac><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeletDown</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>Kubelet has disappeared from Prometheus target discovery.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletdown</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Target disappeared from Prometheus target discovery.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  absent(up{job=&#34;kubelet&#34;} == 1)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span></code></pre></div></div></div><h3 id=kubernetes-system-scheduler>kubernetes-system-scheduler</h3><h5 id=kubeschedulerdown>KubeSchedulerDown</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeschedulerdown>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeschedulerdown</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_d2ab85325a>
Copy</button></div><div id=clipboard_d2ab85325a><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeSchedulerDown</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeScheduler has disappeared from Prometheus target discovery.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeschedulerdown</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Target disappeared from Prometheus target discovery.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  absent(up{job=&#34;kube-scheduler&#34;} == 1)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span></code></pre></div></div></div><h3 id=kubernetes-system-controller-manager>kubernetes-system-controller-manager</h3><h5 id=kubecontrollermanagerdown>KubeControllerManagerDown</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecontrollermanagerdown>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecontrollermanagerdown</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_43b10afc48>
Copy</button></div><div id=clipboard_43b10afc48><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeControllerManagerDown</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeControllerManager has disappeared from Prometheus target discovery.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecontrollermanagerdown</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Target disappeared from Prometheus target discovery.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  absent(up{job=&#34;kube-controller-manager&#34;} == 1)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span></code></pre></div></div></div><h3 id=kubernetes-system-kube-proxy>kubernetes-system-kube-proxy</h3><h5 id=kubeproxydown>KubeProxyDown</h5><p><a href=https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeproxydown>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeproxydown</a></p><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_acb3c559c9>
Copy</button></div><div id=clipboard_acb3c559c9><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>alert</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeProxyDown</span>
</span></span><span style=display:flex><span><span style=color:#f92672>annotations</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>description</span><span style=color:#111>:</span> <span style=color:#ae81ff>KubeProxy has disappeared from Prometheus target discovery.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>runbook_url</span><span style=color:#111>:</span> <span style=color:#ae81ff>https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeproxydown</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>summary</span><span style=color:#111>:</span> <span style=color:#ae81ff>Target disappeared from Prometheus target discovery.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  absent(up{job=&#34;kube-proxy&#34;} == 1)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>for</span><span style=color:#111>:</span> <span style=color:#ae81ff>15m</span>
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>severity</span><span style=color:#111>:</span> <span style=color:#ae81ff>critical</span>
</span></span></code></pre></div></div></div><h2 id=recording-rules>Recording rules</h2><div class="card my-3 border-top-0 border-right-0 border-bottom-0 border-left border-warning rounded" style=border-width:4px!important><div class="wrap border border-left-0 rounded"><div class="card-body pt-1">Complete list of pregenerated recording rules is available <a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/rules.yaml>here</a>.</div></div></div><h3 id=kube-apiserver-burnraterules>kube-apiserver-burnrate.rules</h3><h5 id=apiserver_requestburnrate1d>apiserver_request:burnrate1d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_f72c006cdd>
Copy</button></div><div id=clipboard_f72c006cdd><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[1d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      (
</span></span></span><span style=display:flex><span><span style=color:#d88200>        (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=~&#34;resource|&#34;,le=&#34;1&#34;}[1d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>          or
</span></span></span><span style=display:flex><span><span style=color:#d88200>          vector(0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>        )
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;namespace&#34;,le=&#34;5&#34;}[1d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;cluster&#34;,le=&#34;30&#34;}[1d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    # errors
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,code=~&#34;5..&#34;}[1d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;}[1d]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate1d</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate1h>apiserver_request:burnrate1h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_120f8cd361>
Copy</button></div><div id=clipboard_120f8cd361><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[1h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      (
</span></span></span><span style=display:flex><span><span style=color:#d88200>        (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=~&#34;resource|&#34;,le=&#34;1&#34;}[1h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>          or
</span></span></span><span style=display:flex><span><span style=color:#d88200>          vector(0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>        )
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;namespace&#34;,le=&#34;5&#34;}[1h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;cluster&#34;,le=&#34;30&#34;}[1h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    # errors
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,code=~&#34;5..&#34;}[1h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;}[1h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate1h</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate2h>apiserver_request:burnrate2h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_537d461d84>
Copy</button></div><div id=clipboard_537d461d84><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[2h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      (
</span></span></span><span style=display:flex><span><span style=color:#d88200>        (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=~&#34;resource|&#34;,le=&#34;1&#34;}[2h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>          or
</span></span></span><span style=display:flex><span><span style=color:#d88200>          vector(0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>        )
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;namespace&#34;,le=&#34;5&#34;}[2h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;cluster&#34;,le=&#34;30&#34;}[2h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    # errors
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,code=~&#34;5..&#34;}[2h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;}[2h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate2h</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate30m>apiserver_request:burnrate30m</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_e81f0837dc>
Copy</button></div><div id=clipboard_e81f0837dc><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[30m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      (
</span></span></span><span style=display:flex><span><span style=color:#d88200>        (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=~&#34;resource|&#34;,le=&#34;1&#34;}[30m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>          or
</span></span></span><span style=display:flex><span><span style=color:#d88200>          vector(0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>        )
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;namespace&#34;,le=&#34;5&#34;}[30m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;cluster&#34;,le=&#34;30&#34;}[30m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    # errors
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,code=~&#34;5..&#34;}[30m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;}[30m]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate30m</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate3d>apiserver_request:burnrate3d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_55f9321468>
Copy</button></div><div id=clipboard_55f9321468><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[3d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      (
</span></span></span><span style=display:flex><span><span style=color:#d88200>        (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=~&#34;resource|&#34;,le=&#34;1&#34;}[3d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>          or
</span></span></span><span style=display:flex><span><span style=color:#d88200>          vector(0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>        )
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;namespace&#34;,le=&#34;5&#34;}[3d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;cluster&#34;,le=&#34;30&#34;}[3d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    # errors
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,code=~&#34;5..&#34;}[3d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;}[3d]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate3d</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate5m>apiserver_request:burnrate5m</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_5fed0bc420>
Copy</button></div><div id=clipboard_5fed0bc420><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[5m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      (
</span></span></span><span style=display:flex><span><span style=color:#d88200>        (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=~&#34;resource|&#34;,le=&#34;1&#34;}[5m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>          or
</span></span></span><span style=display:flex><span><span style=color:#d88200>          vector(0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>        )
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;namespace&#34;,le=&#34;5&#34;}[5m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;cluster&#34;,le=&#34;30&#34;}[5m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    # errors
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,code=~&#34;5..&#34;}[5m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;}[5m]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate5m</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate6h>apiserver_request:burnrate6h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_0ed7e698ce>
Copy</button></div><div id=clipboard_0ed7e698ce><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[6h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      (
</span></span></span><span style=display:flex><span><span style=color:#d88200>        (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=~&#34;resource|&#34;,le=&#34;1&#34;}[6h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>          or
</span></span></span><span style=display:flex><span><span style=color:#d88200>          vector(0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>        )
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;namespace&#34;,le=&#34;5&#34;}[6h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,scope=&#34;cluster&#34;,le=&#34;30&#34;}[6h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    # errors
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,code=~&#34;5..&#34;}[6h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;}[6h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate6h</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate1d-1>apiserver_request:burnrate1d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_5d1823b5f2>
Copy</button></div><div id=clipboard_5d1823b5f2><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[1d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,le=&#34;1&#34;}[1d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,code=~&#34;5..&#34;}[1d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;}[1d]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate1d</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate1h-1>apiserver_request:burnrate1h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_0247366b5c>
Copy</button></div><div id=clipboard_0247366b5c><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[1h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,le=&#34;1&#34;}[1h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,code=~&#34;5..&#34;}[1h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;}[1h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate1h</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate2h-1>apiserver_request:burnrate2h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_0e8efe7763>
Copy</button></div><div id=clipboard_0e8efe7763><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[2h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,le=&#34;1&#34;}[2h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,code=~&#34;5..&#34;}[2h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;}[2h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate2h</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate30m-1>apiserver_request:burnrate30m</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_f4d52d7c74>
Copy</button></div><div id=clipboard_f4d52d7c74><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[30m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,le=&#34;1&#34;}[30m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,code=~&#34;5..&#34;}[30m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;}[30m]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate30m</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate3d-1>apiserver_request:burnrate3d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_370014bdad>
Copy</button></div><div id=clipboard_370014bdad><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[3d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,le=&#34;1&#34;}[3d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,code=~&#34;5..&#34;}[3d]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;}[3d]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate3d</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate5m-1>apiserver_request:burnrate5m</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_41a04bc62e>
Copy</button></div><div id=clipboard_41a04bc62e><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[5m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,le=&#34;1&#34;}[5m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,code=~&#34;5..&#34;}[5m]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;}[5m]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate5m</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestburnrate6h-1>apiserver_request:burnrate6h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_b38ea1c56a>
Copy</button></div><div id=clipboard_b38ea1c56a><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[6h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;,le=&#34;1&#34;}[6h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,code=~&#34;5..&#34;}[6h]))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;}[6h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:burnrate6h</span>
</span></span></code></pre></div></div></div><h3 id=kube-apiserver-histogramrules>kube-apiserver-histogram.rules</h3><h5 id=cluster_quantileapiserver_request_sli_duration_secondshistogram_quantile>cluster_quantile:apiserver_request_sli_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_3c2f48ae9f>
Copy</button></div><div id=clipboard_3c2f48ae9f><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.99, sum by (cluster, le, resource) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[5m]))) &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.99&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_quantile:apiserver_request_sli_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h5 id=cluster_quantileapiserver_request_sli_duration_secondshistogram_quantile-1>cluster_quantile:apiserver_request_sli_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_0388c14f8f>
Copy</button></div><div id=clipboard_0388c14f8f><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.99, sum by (cluster, le, resource) (rate(apiserver_request_sli_duration_seconds_bucket{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;,subresource!~&#34;proxy|attach|log|exec|portforward&#34;}[5m]))) &gt; 0</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.99&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_quantile:apiserver_request_sli_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h3 id=kube-apiserver-availabilityrules>kube-apiserver-availability.rules</h3><h5 id=code_verbapiserver_request_totalincrease30d>code_verb:apiserver_request_total:increase30d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_bddfeae275>
Copy</button></div><div id=clipboard_bddfeae275><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  avg_over_time(code_verb:apiserver_request_total:increase1h[30d]) * 24 * 30</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>code_verb:apiserver_request_total:increase30d</span>
</span></span></code></pre></div></div></div><h5 id=codeapiserver_request_totalincrease30d>code:apiserver_request_total:increase30d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_8d94d9693d>
Copy</button></div><div id=clipboard_8d94d9693d><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster, code) (code_verb:apiserver_request_total:increase30d{verb=~&#34;LIST|GET&#34;})</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>code:apiserver_request_total:increase30d</span>
</span></span></code></pre></div></div></div><h5 id=codeapiserver_request_totalincrease30d-1>code:apiserver_request_total:increase30d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_da3408e8e1>
Copy</button></div><div id=clipboard_da3408e8e1><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster, code) (code_verb:apiserver_request_total:increase30d{verb=~&#34;POST|PUT|PATCH|DELETE&#34;})</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>code:apiserver_request_total:increase30d</span>
</span></span></code></pre></div></div></div><h5 id=cluster_verb_scopeapiserver_request_sli_duration_seconds_countincrease1h>cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase1h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_9b546d52db>
Copy</button></div><div id=clipboard_9b546d52db><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster, verb, scope) (increase(apiserver_request_sli_duration_seconds_count{job=&#34;kube-apiserver&#34;}[1h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase1h</span>
</span></span></code></pre></div></div></div><h5 id=cluster_verb_scopeapiserver_request_sli_duration_seconds_countincrease30d>cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase30d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_146ca97e30>
Copy</button></div><div id=clipboard_146ca97e30><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster, verb, scope) (avg_over_time(cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase1h[30d]) * 24 * 30)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase30d</span>
</span></span></code></pre></div></div></div><h5 id=cluster_verb_scope_leapiserver_request_sli_duration_seconds_bucketincrease1h>cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase1h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_1eb275ba87>
Copy</button></div><div id=clipboard_1eb275ba87><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster, verb, scope, le) (increase(apiserver_request_sli_duration_seconds_bucket[1h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase1h</span>
</span></span></code></pre></div></div></div><h5 id=cluster_verb_scope_leapiserver_request_sli_duration_seconds_bucketincrease30d>cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_99fa90a7c6>
Copy</button></div><div id=clipboard_99fa90a7c6><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster, verb, scope, le) (avg_over_time(cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase1h[30d]) * 24 * 30)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestavailability30d>apiserver_request:availability30d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_244077a00b>
Copy</button></div><div id=clipboard_244077a00b><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  1 - (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # write too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase30d{verb=~&#34;POST|PUT|PATCH|DELETE&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~&#34;POST|PUT|PATCH|DELETE&#34;,le=&#34;1&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>    ) +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # read too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase30d{verb=~&#34;LIST|GET&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      (
</span></span></span><span style=display:flex><span><span style=color:#d88200>        (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          sum by (cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~&#34;LIST|GET&#34;,scope=~&#34;resource|&#34;,le=&#34;1&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>          or
</span></span></span><span style=display:flex><span><span style=color:#d88200>          vector(0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>        )
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~&#34;LIST|GET&#34;,scope=&#34;namespace&#34;,le=&#34;5&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>        +
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~&#34;LIST|GET&#34;,scope=&#34;cluster&#34;,le=&#34;30&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    ) +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    # errors
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (code:apiserver_request_total:increase30d{code=~&#34;5..&#34;} or vector(0))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (code:apiserver_request_total:increase30d)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>all</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:availability30d</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestavailability30d-1>apiserver_request:availability30d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_87ed954272>
Copy</button></div><div id=clipboard_87ed954272><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  1 - (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase30d{verb=~&#34;LIST|GET&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>    -
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      (
</span></span></span><span style=display:flex><span><span style=color:#d88200>        sum by (cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~&#34;LIST|GET&#34;,scope=~&#34;resource|&#34;,le=&#34;1&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>        or
</span></span></span><span style=display:flex><span><span style=color:#d88200>        vector(0)
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>      +
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~&#34;LIST|GET&#34;,scope=&#34;namespace&#34;,le=&#34;5&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>      +
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~&#34;LIST|GET&#34;,scope=&#34;cluster&#34;,le=&#34;30&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    # errors
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (code:apiserver_request_total:increase30d{verb=&#34;read&#34;,code=~&#34;5..&#34;} or vector(0))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (code:apiserver_request_total:increase30d{verb=&#34;read&#34;})</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:availability30d</span>
</span></span></code></pre></div></div></div><h5 id=apiserver_requestavailability30d-2>apiserver_request:availability30d</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_56089d4087>
Copy</button></div><div id=clipboard_56089d4087><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  1 - (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      # too slow
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (cluster_verb_scope:apiserver_request_sli_duration_seconds_count:increase30d{verb=~&#34;POST|PUT|PATCH|DELETE&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>      -
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (cluster) (cluster_verb_scope_le:apiserver_request_sli_duration_seconds_bucket:increase30d{verb=~&#34;POST|PUT|PATCH|DELETE&#34;,le=&#34;1&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>    +
</span></span></span><span style=display:flex><span><span style=color:#d88200>    # errors
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum by (cluster) (code:apiserver_request_total:increase30d{verb=&#34;write&#34;,code=~&#34;5..&#34;} or vector(0))
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  /
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster) (code:apiserver_request_total:increase30d{verb=&#34;write&#34;})</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>apiserver_request:availability30d</span>
</span></span></code></pre></div></div></div><h5 id=code_resourceapiserver_request_totalrate5m>code_resource:apiserver_request_total:rate5m</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_9c78303f43>
Copy</button></div><div id=clipboard_9c78303f43><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster,code,resource) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET&#34;}[5m]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>read</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>code_resource:apiserver_request_total:rate5m</span>
</span></span></code></pre></div></div></div><h5 id=code_resourceapiserver_request_totalrate5m-1>code_resource:apiserver_request_total:rate5m</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_97fe2ed9ff>
Copy</button></div><div id=clipboard_97fe2ed9ff><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster,code,resource) (rate(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;POST|PUT|PATCH|DELETE&#34;}[5m]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>verb</span><span style=color:#111>:</span> <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>code_resource:apiserver_request_total:rate5m</span>
</span></span></code></pre></div></div></div><h5 id=code_verbapiserver_request_totalincrease1h>code_verb:apiserver_request_total:increase1h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_595d7f62b3>
Copy</button></div><div id=clipboard_595d7f62b3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster, code, verb) (increase(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET|POST|PUT|PATCH|DELETE&#34;,code=~&#34;2..&#34;}[1h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>code_verb:apiserver_request_total:increase1h</span>
</span></span></code></pre></div></div></div><h5 id=code_verbapiserver_request_totalincrease1h-1>code_verb:apiserver_request_total:increase1h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_7dfc90d330>
Copy</button></div><div id=clipboard_7dfc90d330><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster, code, verb) (increase(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET|POST|PUT|PATCH|DELETE&#34;,code=~&#34;3..&#34;}[1h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>code_verb:apiserver_request_total:increase1h</span>
</span></span></code></pre></div></div></div><h5 id=code_verbapiserver_request_totalincrease1h-2>code_verb:apiserver_request_total:increase1h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_c93fccf140>
Copy</button></div><div id=clipboard_c93fccf140><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster, code, verb) (increase(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET|POST|PUT|PATCH|DELETE&#34;,code=~&#34;4..&#34;}[1h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>code_verb:apiserver_request_total:increase1h</span>
</span></span></code></pre></div></div></div><h5 id=code_verbapiserver_request_totalincrease1h-3>code_verb:apiserver_request_total:increase1h</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_d14495e559>
Copy</button></div><div id=clipboard_d14495e559><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster, code, verb) (increase(apiserver_request_total{job=&#34;kube-apiserver&#34;,verb=~&#34;LIST|GET|POST|PUT|PATCH|DELETE&#34;,code=~&#34;5..&#34;}[1h]))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>code_verb:apiserver_request_total:increase1h</span>
</span></span></code></pre></div></div></div><h3 id=k8srulescontainer_cpu_usage_seconds_total>k8s.rules.container_cpu_usage_seconds_total</h3><h5 id=node_namespace_pod_containercontainer_cpu_usage_seconds_totalsum_irate>node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_4aec3dde4e>
Copy</button></div><div id=clipboard_4aec3dde4e><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (cluster, namespace, pod, container) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    irate(container_cpu_usage_seconds_total{job=&#34;cadvisor&#34;, image!=&#34;&#34;}[5m])
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ) * on (cluster, namespace, pod) group_left(node) topk by (cluster, namespace, pod) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    1, max by(cluster, namespace, pod, node) (kube_pod_info{node!=&#34;&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate</span>
</span></span></code></pre></div></div></div><h3 id=k8srulescontainer_memory_working_set_bytes>k8s.rules.container_memory_working_set_bytes</h3><h5 id=node_namespace_pod_containercontainer_memory_working_set_bytes>node_namespace_pod_container:container_memory_working_set_bytes</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_172dd5626d>
Copy</button></div><div id=clipboard_172dd5626d><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  container_memory_working_set_bytes{job=&#34;cadvisor&#34;, image!=&#34;&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>  * on (cluster, namespace, pod) group_left(node) topk by(cluster, namespace, pod) (1,
</span></span></span><span style=display:flex><span><span style=color:#d88200>    max by(cluster, namespace, pod, node) (kube_pod_info{node!=&#34;&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>node_namespace_pod_container:container_memory_working_set_bytes</span>
</span></span></code></pre></div></div></div><h3 id=k8srulescontainer_memory_rss>k8s.rules.container_memory_rss</h3><h5 id=node_namespace_pod_containercontainer_memory_rss>node_namespace_pod_container:container_memory_rss</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_4a3c797c46>
Copy</button></div><div id=clipboard_4a3c797c46><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  container_memory_rss{job=&#34;cadvisor&#34;, image!=&#34;&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>  * on (cluster, namespace, pod) group_left(node) topk by(cluster, namespace, pod) (1,
</span></span></span><span style=display:flex><span><span style=color:#d88200>    max by(cluster, namespace, pod, node) (kube_pod_info{node!=&#34;&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>node_namespace_pod_container:container_memory_rss</span>
</span></span></code></pre></div></div></div><h3 id=k8srulescontainer_memory_cache>k8s.rules.container_memory_cache</h3><h5 id=node_namespace_pod_containercontainer_memory_cache>node_namespace_pod_container:container_memory_cache</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_b78bc7ef8f>
Copy</button></div><div id=clipboard_b78bc7ef8f><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  container_memory_cache{job=&#34;cadvisor&#34;, image!=&#34;&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>  * on (cluster, namespace, pod) group_left(node) topk by(cluster, namespace, pod) (1,
</span></span></span><span style=display:flex><span><span style=color:#d88200>    max by(cluster, namespace, pod, node) (kube_pod_info{node!=&#34;&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>node_namespace_pod_container:container_memory_cache</span>
</span></span></code></pre></div></div></div><h3 id=k8srulescontainer_memory_swap>k8s.rules.container_memory_swap</h3><h5 id=node_namespace_pod_containercontainer_memory_swap>node_namespace_pod_container:container_memory_swap</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_3aec136a00>
Copy</button></div><div id=clipboard_3aec136a00><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  container_memory_swap{job=&#34;cadvisor&#34;, image!=&#34;&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>  * on (cluster, namespace, pod) group_left(node) topk by(cluster, namespace, pod) (1,
</span></span></span><span style=display:flex><span><span style=color:#d88200>    max by(cluster, namespace, pod, node) (kube_pod_info{node!=&#34;&#34;})
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>node_namespace_pod_container:container_memory_swap</span>
</span></span></code></pre></div></div></div><h3 id=k8srulescontainer_resource>k8s.rules.container_resource</h3><h5 id=clusternamespacepod_memoryactivekube_pod_container_resource_requests>cluster:namespace:pod_memory:active:kube_pod_container_resource_requests</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_dd4debc9ca>
Copy</button></div><div id=clipboard_dd4debc9ca><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_pod_container_resource_requests{resource=&#34;memory&#34;,job=&#34;kube-state-metrics&#34;}  * on (namespace, pod, cluster)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  group_left() max by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (kube_pod_status_phase{phase=~&#34;Pending|Running&#34;} == 1)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster:namespace:pod_memory:active:kube_pod_container_resource_requests</span>
</span></span></code></pre></div></div></div><h5 id=namespace_memorykube_pod_container_resource_requestssum>namespace_memory:kube_pod_container_resource_requests:sum</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_e85eebbf2b>
Copy</button></div><div id=clipboard_e85eebbf2b><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (namespace, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          max by (namespace, pod, container, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>            kube_pod_container_resource_requests{resource=&#34;memory&#34;,job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>          ) * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>            kube_pod_status_phase{phase=~&#34;Pending|Running&#34;} == 1
</span></span></span><span style=display:flex><span><span style=color:#d88200>          )
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>namespace_memory:kube_pod_container_resource_requests:sum</span>
</span></span></code></pre></div></div></div><h5 id=clusternamespacepod_cpuactivekube_pod_container_resource_requests>cluster:namespace:pod_cpu:active:kube_pod_container_resource_requests</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_b92af1c250>
Copy</button></div><div id=clipboard_b92af1c250><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_pod_container_resource_requests{resource=&#34;cpu&#34;,job=&#34;kube-state-metrics&#34;}  * on (namespace, pod, cluster)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  group_left() max by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (kube_pod_status_phase{phase=~&#34;Pending|Running&#34;} == 1)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster:namespace:pod_cpu:active:kube_pod_container_resource_requests</span>
</span></span></code></pre></div></div></div><h5 id=namespace_cpukube_pod_container_resource_requestssum>namespace_cpu:kube_pod_container_resource_requests:sum</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_4ba1ab33ba>
Copy</button></div><div id=clipboard_4ba1ab33ba><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (namespace, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          max by (namespace, pod, container, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>            kube_pod_container_resource_requests{resource=&#34;cpu&#34;,job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>          ) * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>            kube_pod_status_phase{phase=~&#34;Pending|Running&#34;} == 1
</span></span></span><span style=display:flex><span><span style=color:#d88200>          )
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>namespace_cpu:kube_pod_container_resource_requests:sum</span>
</span></span></code></pre></div></div></div><h5 id=clusternamespacepod_memoryactivekube_pod_container_resource_limits>cluster:namespace:pod_memory:active:kube_pod_container_resource_limits</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_a21b29a9f9>
Copy</button></div><div id=clipboard_a21b29a9f9><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_pod_container_resource_limits{resource=&#34;memory&#34;,job=&#34;kube-state-metrics&#34;}  * on (namespace, pod, cluster)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  group_left() max by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (kube_pod_status_phase{phase=~&#34;Pending|Running&#34;} == 1)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster:namespace:pod_memory:active:kube_pod_container_resource_limits</span>
</span></span></code></pre></div></div></div><h5 id=namespace_memorykube_pod_container_resource_limitssum>namespace_memory:kube_pod_container_resource_limits:sum</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_b85d4b905d>
Copy</button></div><div id=clipboard_b85d4b905d><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (namespace, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          max by (namespace, pod, container, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>            kube_pod_container_resource_limits{resource=&#34;memory&#34;,job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>          ) * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>            kube_pod_status_phase{phase=~&#34;Pending|Running&#34;} == 1
</span></span></span><span style=display:flex><span><span style=color:#d88200>          )
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>namespace_memory:kube_pod_container_resource_limits:sum</span>
</span></span></code></pre></div></div></div><h5 id=clusternamespacepod_cpuactivekube_pod_container_resource_limits>cluster:namespace:pod_cpu:active:kube_pod_container_resource_limits</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_c3c10ba71f>
Copy</button></div><div id=clipboard_c3c10ba71f><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  kube_pod_container_resource_limits{resource=&#34;cpu&#34;,job=&#34;kube-state-metrics&#34;}  * on (namespace, pod, cluster)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  group_left() max by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>   (kube_pod_status_phase{phase=~&#34;Pending|Running&#34;} == 1)
</span></span></span><span style=display:flex><span><span style=color:#d88200>   )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster:namespace:pod_cpu:active:kube_pod_container_resource_limits</span>
</span></span></code></pre></div></div></div><h5 id=namespace_cpukube_pod_container_resource_limitssum>namespace_cpu:kube_pod_container_resource_limits:sum</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_057989bf52>
Copy</button></div><div id=clipboard_057989bf52><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum by (namespace, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      sum by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          max by (namespace, pod, container, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>            kube_pod_container_resource_limits{resource=&#34;cpu&#34;,job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>          ) * on(namespace, pod, cluster) group_left() max by (namespace, pod, cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>            kube_pod_status_phase{phase=~&#34;Pending|Running&#34;} == 1
</span></span></span><span style=display:flex><span><span style=color:#d88200>          )
</span></span></span><span style=display:flex><span><span style=color:#d88200>      )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>namespace_cpu:kube_pod_container_resource_limits:sum</span>
</span></span></code></pre></div></div></div><h3 id=k8srulespod_owner>k8s.rules.pod_owner</h3><h5 id=namespace_workload_podkube_pod_ownerrelabel>namespace_workload_pod:kube_pod_owner:relabel</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_322bb3d415>
Copy</button></div><div id=clipboard_322bb3d415><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  max by (cluster, namespace, workload, pod) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    label_replace(
</span></span></span><span style=display:flex><span><span style=color:#d88200>      label_replace(
</span></span></span><span style=display:flex><span><span style=color:#d88200>        kube_pod_owner{job=&#34;kube-state-metrics&#34;, owner_kind=&#34;ReplicaSet&#34;},
</span></span></span><span style=display:flex><span><span style=color:#d88200>        &#34;replicaset&#34;, &#34;$1&#34;, &#34;owner_name&#34;, &#34;(.*)&#34;
</span></span></span><span style=display:flex><span><span style=color:#d88200>      ) * on(replicaset, namespace) group_left(owner_name) topk by(replicaset, namespace) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>        1, max by (replicaset, namespace, owner_name) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>          kube_replicaset_owner{job=&#34;kube-state-metrics&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>        )
</span></span></span><span style=display:flex><span><span style=color:#d88200>      ),
</span></span></span><span style=display:flex><span><span style=color:#d88200>      &#34;workload&#34;, &#34;$1&#34;, &#34;owner_name&#34;, &#34;(.*)&#34;
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>workload_type</span><span style=color:#111>:</span> <span style=color:#ae81ff>deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>namespace_workload_pod:kube_pod_owner:relabel</span>
</span></span></code></pre></div></div></div><h5 id=namespace_workload_podkube_pod_ownerrelabel-1>namespace_workload_pod:kube_pod_owner:relabel</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_9b95246df1>
Copy</button></div><div id=clipboard_9b95246df1><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  max by (cluster, namespace, workload, pod) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    label_replace(
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_pod_owner{job=&#34;kube-state-metrics&#34;, owner_kind=&#34;DaemonSet&#34;},
</span></span></span><span style=display:flex><span><span style=color:#d88200>      &#34;workload&#34;, &#34;$1&#34;, &#34;owner_name&#34;, &#34;(.*)&#34;
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>workload_type</span><span style=color:#111>:</span> <span style=color:#ae81ff>daemonset</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>namespace_workload_pod:kube_pod_owner:relabel</span>
</span></span></code></pre></div></div></div><h5 id=namespace_workload_podkube_pod_ownerrelabel-2>namespace_workload_pod:kube_pod_owner:relabel</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_2f0538ed27>
Copy</button></div><div id=clipboard_2f0538ed27><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  max by (cluster, namespace, workload, pod) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    label_replace(
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_pod_owner{job=&#34;kube-state-metrics&#34;, owner_kind=&#34;StatefulSet&#34;},
</span></span></span><span style=display:flex><span><span style=color:#d88200>      &#34;workload&#34;, &#34;$1&#34;, &#34;owner_name&#34;, &#34;(.*)&#34;
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>workload_type</span><span style=color:#111>:</span> <span style=color:#ae81ff>statefulset</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>namespace_workload_pod:kube_pod_owner:relabel</span>
</span></span></code></pre></div></div></div><h5 id=namespace_workload_podkube_pod_ownerrelabel-3>namespace_workload_pod:kube_pod_owner:relabel</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_ee8f1b2d6f>
Copy</button></div><div id=clipboard_ee8f1b2d6f><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  max by (cluster, namespace, workload, pod) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    label_replace(
</span></span></span><span style=display:flex><span><span style=color:#d88200>      kube_pod_owner{job=&#34;kube-state-metrics&#34;, owner_kind=&#34;Job&#34;},
</span></span></span><span style=display:flex><span><span style=color:#d88200>      &#34;workload&#34;, &#34;$1&#34;, &#34;owner_name&#34;, &#34;(.*)&#34;
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>workload_type</span><span style=color:#111>:</span> <span style=color:#ae81ff>job</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>namespace_workload_pod:kube_pod_owner:relabel</span>
</span></span></code></pre></div></div></div><h3 id=kube-schedulerrules>kube-scheduler.rules</h3><h5 id=cluster_quantilescheduler_e2e_scheduling_duration_secondshistogram_quantile>cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_5bb2f93e5b>
Copy</button></div><div id=clipboard_5bb2f93e5b><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.99, sum(rate(scheduler_e2e_scheduling_duration_seconds_bucket{job=&#34;kube-scheduler&#34;}[5m])) without(instance, pod))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.99&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h5 id=cluster_quantilescheduler_scheduling_algorithm_duration_secondshistogram_quantile>cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_43924fdce5>
Copy</button></div><div id=clipboard_43924fdce5><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.99, sum(rate(scheduler_scheduling_algorithm_duration_seconds_bucket{job=&#34;kube-scheduler&#34;}[5m])) without(instance, pod))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.99&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h5 id=cluster_quantilescheduler_binding_duration_secondshistogram_quantile>cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_c62c2ca1e1>
Copy</button></div><div id=clipboard_c62c2ca1e1><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.99, sum(rate(scheduler_binding_duration_seconds_bucket{job=&#34;kube-scheduler&#34;}[5m])) without(instance, pod))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.99&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h5 id=cluster_quantilescheduler_e2e_scheduling_duration_secondshistogram_quantile-1>cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_532afd0a49>
Copy</button></div><div id=clipboard_532afd0a49><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.9, sum(rate(scheduler_e2e_scheduling_duration_seconds_bucket{job=&#34;kube-scheduler&#34;}[5m])) without(instance, pod))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.9&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h5 id=cluster_quantilescheduler_scheduling_algorithm_duration_secondshistogram_quantile-1>cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_065e738bd4>
Copy</button></div><div id=clipboard_065e738bd4><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.9, sum(rate(scheduler_scheduling_algorithm_duration_seconds_bucket{job=&#34;kube-scheduler&#34;}[5m])) without(instance, pod))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.9&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h5 id=cluster_quantilescheduler_binding_duration_secondshistogram_quantile-1>cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_47c06ac8cd>
Copy</button></div><div id=clipboard_47c06ac8cd><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.9, sum(rate(scheduler_binding_duration_seconds_bucket{job=&#34;kube-scheduler&#34;}[5m])) without(instance, pod))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.9&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h5 id=cluster_quantilescheduler_e2e_scheduling_duration_secondshistogram_quantile-2>cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_67fbe2c843>
Copy</button></div><div id=clipboard_67fbe2c843><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.5, sum(rate(scheduler_e2e_scheduling_duration_seconds_bucket{job=&#34;kube-scheduler&#34;}[5m])) without(instance, pod))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.5&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_quantile:scheduler_e2e_scheduling_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h5 id=cluster_quantilescheduler_scheduling_algorithm_duration_secondshistogram_quantile-2>cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_f2a0abfaa8>
Copy</button></div><div id=clipboard_f2a0abfaa8><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.5, sum(rate(scheduler_scheduling_algorithm_duration_seconds_bucket{job=&#34;kube-scheduler&#34;}[5m])) without(instance, pod))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.5&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_quantile:scheduler_scheduling_algorithm_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h5 id=cluster_quantilescheduler_binding_duration_secondshistogram_quantile-2>cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_8666b417dd>
Copy</button></div><div id=clipboard_8666b417dd><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.5, sum(rate(scheduler_binding_duration_seconds_bucket{job=&#34;kube-scheduler&#34;}[5m])) without(instance, pod))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.5&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster_quantile:scheduler_binding_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h3 id=noderules>node.rules</h3><h5 id=node_namespace_podkube_pod_info>&rsquo;node_namespace_pod:kube_pod_info:'</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_e49aa40085>
Copy</button></div><div id=clipboard_e49aa40085><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  topk by(cluster, namespace, pod) (1,
</span></span></span><span style=display:flex><span><span style=color:#d88200>    max by (cluster, node, namespace, pod) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      label_replace(kube_pod_info{job=&#34;kube-state-metrics&#34;,node!=&#34;&#34;}, &#34;pod&#34;, &#34;$1&#34;, &#34;pod&#34;, &#34;(.*)&#34;)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ))</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#d88200>&#39;node_namespace_pod:kube_pod_info:&#39;</span>
</span></span></code></pre></div></div></div><h5 id=nodenode_num_cpusum>node:node_num_cpu:sum</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_dbe8c41bf6>
Copy</button></div><div id=clipboard_dbe8c41bf6><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  count by (cluster, node) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    node_cpu_seconds_total{mode=&#34;idle&#34;,job=&#34;node-exporter&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    * on (cluster, namespace, pod) group_left(node)
</span></span></span><span style=display:flex><span><span style=color:#d88200>    topk by(cluster, namespace, pod) (1, node_namespace_pod:kube_pod_info:)
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>node:node_num_cpu:sum</span>
</span></span></code></pre></div></div></div><h5 id=node_memory_memavailable_bytessum>:node_memory_MemAvailable_bytes:sum</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_1b23f4b08b>
Copy</button></div><div id=clipboard_1b23f4b08b><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  sum(
</span></span></span><span style=display:flex><span><span style=color:#d88200>    node_memory_MemAvailable_bytes{job=&#34;node-exporter&#34;} or
</span></span></span><span style=display:flex><span><span style=color:#d88200>    (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      node_memory_Buffers_bytes{job=&#34;node-exporter&#34;} +
</span></span></span><span style=display:flex><span><span style=color:#d88200>      node_memory_Cached_bytes{job=&#34;node-exporter&#34;} +
</span></span></span><span style=display:flex><span><span style=color:#d88200>      node_memory_MemFree_bytes{job=&#34;node-exporter&#34;} +
</span></span></span><span style=display:flex><span><span style=color:#d88200>      node_memory_Slab_bytes{job=&#34;node-exporter&#34;}
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  ) by (cluster)</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#111>:</span><span style=color:#ae81ff>node_memory_MemAvailable_bytes:sum</span>
</span></span></code></pre></div></div></div><h5 id=nodenode_cpu_utilizationratio_rate5m>node:node_cpu_utilization:ratio_rate5m</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_8f33544616>
Copy</button></div><div id=clipboard_8f33544616><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  avg by (cluster, node) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    sum without (mode) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>      rate(node_cpu_seconds_total{mode!=&#34;idle&#34;,mode!=&#34;iowait&#34;,mode!=&#34;steal&#34;,job=&#34;node-exporter&#34;}[5m])
</span></span></span><span style=display:flex><span><span style=color:#d88200>    )
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>node:node_cpu_utilization:ratio_rate5m</span>
</span></span></code></pre></div></div></div><h5 id=clusternode_cpuratio_rate5m>cluster:node_cpu:ratio_rate5m</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_df80251fef>
Copy</button></div><div id=clipboard_df80251fef><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  avg by (cluster) (
</span></span></span><span style=display:flex><span><span style=color:#d88200>    node:node_cpu_utilization:ratio_rate5m
</span></span></span><span style=display:flex><span><span style=color:#d88200>  )</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>cluster:node_cpu:ratio_rate5m</span>
</span></span></code></pre></div></div></div><h3 id=kubeletrules>kubelet.rules</h3><h5 id=node_quantilekubelet_pleg_relist_duration_secondshistogram_quantile>node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_72dece85d9>
Copy</button></div><div id=clipboard_72dece85d9><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.99, sum(rate(kubelet_pleg_relist_duration_seconds_bucket{job=&#34;kubelet&#34;}[5m])) by (cluster, instance, le) * on(cluster, instance) group_left(node) kubelet_node_name{job=&#34;kubelet&#34;})</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.99&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h5 id=node_quantilekubelet_pleg_relist_duration_secondshistogram_quantile-1>node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_2117d24c9f>
Copy</button></div><div id=clipboard_2117d24c9f><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.9, sum(rate(kubelet_pleg_relist_duration_seconds_bucket{job=&#34;kubelet&#34;}[5m])) by (cluster, instance, le) * on(cluster, instance) group_left(node) kubelet_node_name{job=&#34;kubelet&#34;})</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.9&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h5 id=node_quantilekubelet_pleg_relist_duration_secondshistogram_quantile-2>node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile</h5><div class=position-relative><div class=position-absolute style=right:0><button class="btn btn-light" data-clipboard-target=#clipboard_6ea0840e7e>
Copy</button></div><div id=clipboard_6ea0840e7e><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>expr</span><span style=color:#111>:</span> <span style=color:#111>|</span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  histogram_quantile(0.5, sum(rate(kubelet_pleg_relist_duration_seconds_bucket{job=&#34;kubelet&#34;}[5m])) by (cluster, instance, le) * on(cluster, instance) group_left(node) kubelet_node_name{job=&#34;kubelet&#34;})</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>labels</span><span style=color:#111>:</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>quantile</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;0.5&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>record</span><span style=color:#111>:</span> <span style=color:#ae81ff>node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile</span>
</span></span></code></pre></div></div></div><h2 id=dashboards>Dashboards</h2><p>Following dashboards are generated from mixins and hosted on github:</p><ul><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/apiserver.json>apiserver</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/cluster-total.json>cluster-total</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/controller-manager.json>controller-manager</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/k8s-resources-cluster.json>k8s-resources-cluster</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/k8s-resources-namespace.json>k8s-resources-namespace</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/k8s-resources-node.json>k8s-resources-node</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/k8s-resources-pod.json>k8s-resources-pod</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/k8s-resources-workload.json>k8s-resources-workload</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/k8s-resources-workloads-namespace.json>k8s-resources-workloads-namespace</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/kubelet.json>kubelet</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/namespace-by-pod.json>namespace-by-pod</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/namespace-by-workload.json>namespace-by-workload</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/persistentvolumesusage.json>persistentvolumesusage</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/pod-total.json>pod-total</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/proxy.json>proxy</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/scheduler.json>scheduler</a></li><li><a href=https://github.com/observeproject/sites/blob/main/assets/kubernetes/dashboards/workload-total.json>workload-total</a></li></ul><div class=row></div></div></div></div><script src=https://stack.observability.udmire.cn/lib/jquery.min.js></script><script src=https://stack.observability.udmire.cn/lib/popper.min.js></script><script src=https://stack.observability.udmire.cn/js/bootstrap.min.js></script><script type=text/javascript src=/plugins/lunr.min.js></script><script type=text/javascript src=/plugins/auto-complete.js></script><link href=/plugins/auto-complete.css rel=stylesheet><script type=text/javascript>var baseurl="https://stack.observability.udmire.cn/"</script><script type=text/javascript src=/plugins/search.js></script><script type=text/javascript src=/plugins/clipboard.js></script><script>new ClipboardJS(".btn")</script></body></html>